<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdn.bootcss.com/vue/2.5.16/vue.min.js"></script>
  <script src="https://cdn.bootcss.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
</head>
<body>
  <div id="app" class="container">
    <div class="row justify-content-md-center mt-5">


      <div class="col-md-1">
        <div class="btn-group-vertical" role="group">
          <button type="button" class="btn btn-secondary" v-on:click="onSelected(item.tag)" v-for="item in menus">{{ item.text }}</button>
        </div>
      </div>


      <div class="col-md-6" v-if="currentMenuTag === 'completed'">
        <div class="list-group" >
          <task-list
            v-for="task in tasks"
            v-bind:task='task'
            v-bind:tag="'completed'">
          </task-list>
        </div>
      </div>

      <div class="col-md-6" v-else>
        <div class="list-group" >
          <task-list
            v-for="task in tasks"
            v-bind:task='task'
            v-bind:tag="'working'">
          </task-list>
        </div>
      </div>


    </div>
  </div>
</body>
</html>
<script>
//构建组件
Vue.component('task-list', {
  props: ['task', 'tag'],
  template: `
    <a href="#" class="list-group-item list-group-item-action flex-column align-items-start" v-if="task.tag === tag">
      <div class="d-flex w-100 justify-content-between" >
        <h5 class="mb-1">{{ task.title }}</h5>
        <small>{{ task.createAt }}</small>
      </div>
      <p class="mb-1">{{ task.content }}</p>
      <small v-if="task.completed">已完成</small>
      <div class="float-right" v-else>
        <button class="btn btn-primary btn-ms" v-on:click="onCompleted">完成!</button>
      </div>
    </a>
  `,
  methods: {
    onCompleted(completed) {
      console.log('完成啦');
    }
  }
})

// 构建tasks 数据
 const tasks = function() {
   let tasks = [];
   for(let i = 0; i < 10; i++) {
     tasks.push({
       title: 'title' + (i + 1),
       content: 'content' + (i + 1),
       createAt: (new Date()).toString(),
       tag: 'working',
       completed: false
     })
   }
   return tasks;
 }();


  var app = new Vue({
    el: '#app',
    data: {
      tasks: tasks,
      menus: [
        { tag: 'completed',
          text: '已完成'
        },
        { tag: 'working',
          text: '未完成'
        }
      ],
      currentMenuTag: 0
    },
    methods: {
      onSelected(tag) {
        this.currentMenuTag = tag;
      },

      onCompleted(completed) {
        console.log('完成啦');
      }
    }
  })
</script>
